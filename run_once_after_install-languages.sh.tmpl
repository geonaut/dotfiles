#!/bin/bash

# Check the variable from .chezmoi.toml
{{ if .install_languages -}}
echo "üöÄ Opt-in: Installing programming languages..."

# 2a. Rustup
if ! command -v rustup >/dev/null 2>&1; then
    echo "ü¶Ä Installing Rustup..."
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y &> /dev/null
fi

# 2b. Pyenv
if command -v pyenv >/dev/null 2>&1; then
    echo "üêç Setting up Python via pyenv..."
    # Ensure shims are available for the current script
    eval "$(pyenv init --path)"
    if ! pyenv versions --bare | grep -q "3.12"; then
         pyenv install 3.12 &> /dev/null
         pyenv global 3.12
    fi
fi

echo "‚úÖ Language managers initialized."

{{ else -}}
echo "‚è≠Ô∏è Skipping language installation as per config."
{{ end -}}
